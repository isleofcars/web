{% load filters %}
{% load humanize %}
<div class="ad" data-id="{{ ad.id }}" data-href="{{ ad.url }}">
  <div class="ad__gallery">
    <div class="ad__gallery__image">
      <img src="{{ ad.photos.0 }}" alt="{{ ad.title }}" loading="lazy">
    </div>
    <div class="ad__gallery__buttons">
      {% for image in ad.photos|slice:"5" %}
        <img class="hidden"
             src="{{ image }}"
             alt="{{ ad.title }}"
             data-number="{{ forloop.counter }}">
        <div class="ad__gallery__button" data-number="{{ forloop.counter }}">
        </div>
      {% endfor %}
    </div>
  </div>
  <div class="ad__description">
    <div class="ad__header">
      <div class="ad__title">
        {% if ad.year and ad.make and ad.model %}
          {{ ad.year }} {{ ad.make }} {{ ad.model }}
        {% else %}
          {{ ad.title }}
        {% endif %}
      </div>
      <div class="ad__like">
        <svg width="24" height="16">
          <use href="#icon--{% if ad.is_favorite %}un{% endif %}like">
        </svg>
      </div>
    </div>
    <div class="ad__text">
      {{ ad|make_ad_text }}
    </div>
    <div class="ad__description-bottom">
      <div class="ad__location">
        {{ ad.location|default_if_none:'' }}
      </div>
      <div class="ad__price">
        {% if ad.price %}
          ${{ ad.price|add:"0"|intcomma }}
        {% endif %}
      </div>
    </div>
  </div>
</div>
